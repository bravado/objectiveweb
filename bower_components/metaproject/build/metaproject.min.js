/*global alert: true, jQuery: true, ko: true */(function(e,t,n){"use strict";var r=e.metaproject={};n.punches.enableAll();var i={},s=[].slice;r.on=function(e,t){if(typeof t=="function"){e=e.split(/\s+/);for(var n=0,s=e.length,o;n<s;n++)o=e[n],(i[o]=i[o]||[]).push(t),s>1&&(t.typed=!0)}return r},r.off=function(e){e=e.split(/\s+/);for(var t=0;t<e.length;t++)i[e[t]]=[];return r},r.one=function(e,t){return t&&(t.one=!0),r.on(e,t)},r.trigger=function(e){var t=s.call(arguments,1),n=i[e]||[];for(var o=0,u;o<n.length;++o){u=n[o];if(u.one&&u.done)continue;u.apply(r,u.typed?[e].concat(t):t),u.done=!0}return r},r.Application=function(r){var i=this;i.debug=0,typeof r=="function"?i.init=r:(i.init=function(){},t.extend(this,r)),i.run=function(r){n.applyBindings(i,r),i.init.call(i),t(e).trigger("hashchange")}},t.fn.applyBindings=function(e){this.data("viewModel",e).each(function(t,r){n.applyBindings(e,r)})},t.fn.include=function(e,t){var n=this,i=r.debug?"?ts="+(new Date).getTime():"";return n.data("loaded")===e?this:this.addClass("loading").load(e+i,function(){n.data("loaded",e).removeClass("loading"),undefined!==t&&t()})},n.bindingHandlers.include={init:function(e,n,r){var i=t(e),s=n(),o=r().url;s instanceof Array?i.include(s[0],s[1]):i.include(s),o||i.children().trigger("activate",i)}},n.bindingHandlers.url={init:function(n,r,i){var s=t(n),o=r();s.css({visibility:"hidden",position:"absolute",height:0,overflow:"hidden"}),t(e).on("hashchange",function(r){var i=e.location.hash.substr(1)||"/";i===o?(s.css("visibility")!=="visible"&&s.css({visibility:"visible",position:"inherit",height:"auto",overflow:"inherit"}).children().trigger("activate",[n,i]),t(e).scrollTop(0)):s.css("visibility")==="visible"&&s.css({visibility:"hidden",position:"absolute",height:0,overflow:"hidden"}).children().trigger("deactivate",[s,i])})}}})(window,jQuery,ko),undefined!==jQuery.fn.fullCalendar&&function(e,t){"use strict";t.bindingHandlers.calendar={init:function(n,r,i){var s=n.getContext("2d"),o=new Chart(s);o._type=n.dataset.chart||"line",e(n).data("chart",o),t.bindingHandlers.chart.update(n,r,i)},update:function(n,r,i){var s=t.utils.unwrapObservable(r()),o=i().chartOptions,u=e(n).data("chart");switch(u._type){case"line":u.Line(s,o);break;case"bar":u.Bar(s,o);break;case"radar":u.Radar(s,o);break;case"polar":u.PolarArea(s,o);break;case"pie":u.Pie(s,o);break;case"doughnut":u.Doughnut(s,o);break;default:throw"invalid chart type"}}}}(jQuery,ko),undefined!==window.Chart&&function(e,t,n){"use strict";t.bindingHandlers.chart={init:function(r,i,s){var o=r.getContext("2d"),u=new n(o);u._type=r.dataset.chart||"line",e(r).data("chart",u),t.bindingHandlers.chart.update(r,i,s)},update:function(n,r,i){var s=t.utils.unwrapObservable(r()),o=i().chartOptions,u=e(n).data("chart");switch(u._type){case"line":u.Line(s,o);break;case"bar":u.Bar(s,o);break;case"radar":u.Radar(s,o);break;case"polar":u.PolarArea(s,o);break;case"pie":u.Pie(s,o);break;case"doughnut":u.Doughnut(s,o);break;default:throw"invalid chart type"}}}}(jQuery,ko,Chart),function(e,t,n){"use strict";var r=e.metaproject||{};r.DataSource=function(e,r){var i=this,s=t("<div/>");r=t.extend({key:"id",model:function(e){t.extend(this,e)}},r),i.on=s.on.bind(s),i.trigger=s.trigger.bind(s),i.errorHandler=undefined,i._id=function(e){if(typeof e=="object"){if(e.hasOwnProperty(r.key))return n.utils.unwrapObservable(e[r.key]);throw"Model key "+r.key+" not set!"}return e},i.get=function(n,s,o){return typeof n!="string"?n="/"+i._id(n):n[0]!=="/"&&(n="/"+n),typeof s=="function"&&(o=s,s={}),t.ajax({url:e+n,data:s||{},dataType:"json",type:"GET",error:i.errorHandler,success:function(e){typeof o=="function"&&(e instanceof Array?o(t.map(e,function(e,t){return new r.model(e)})):o(new r.model(e)))}})},i.post=function(n,r){return t.ajax({url:e,dataType:"json",type:"POST",data:n,success:function(e){s.trigger("changed",{action:"post",data:e}),typeof r=="function"&&r(e)},error:i.errorHandler})},i.put=function(n,r,o){return typeof n=="object"&&(typeof r=="function"&&(o=r),r=n,n=i._id(r)),t.ajax({url:e+"/"+i._id(n),dataType:"json",type:"PUT",data:r,success:function(e){s.trigger("changed",{action:"put",data:e}),typeof o=="function"&&o(e)},error:i.errorHandler})},i.destroy=function(n,r){return t.ajax({url:e+"/"+i._id(n),dataType:"json",type:"DELETE",success:function(e){s.trigger("changed",{action:"destroy",data:e}),typeof r=="function"&&r(e)},error:i.errorHandler})}},r.Model=function(e,i){var s=function(r){var s=this;r=r||{};var o={};t.each(e,function(t,i){typeof i=="function"?o[t]=n.computed({read:i,deferEvaluation:!0},s):undefined===r[t]&&(r[t]=e[t])}),n.mapping.fromJS(r,i||{},s),t.extend(s,o)};s.mapper={create:function(e){return new s(e.data)}};var o=null;return s.getDataSource=function(){if(o)return o;throw"Model not bound to any DataSource"},s.bind=function(e,t){return typeof e=="string"&&(undefined===t?t={model:s}:t.model=s,o=new r.DataSource(e,t)),s},s.create=function(e){return new s(e)},s.get=function(e,t){return s.getDataSource().get(e,t)},s.on=function(e,t){return s.getDataSource().on(e,t)},s.changed=function(){return s.getDataSource().trigger("changed")},s.query=function(e,t){var r=s.getDataSource(),i=n.observable([]),o=n.observable(e||{}),u=n.observable(null),a=n.computed({read:function(){var e=n.toJSON(o());return u()!==e&&(a.loading(!0),r.get("/",o(),function(t){u(e),i(t),a.loading(!1)})),i()},write:i,deferEvaluation:!0});return a.loading=n.observable(!1),a._live=typeof t=="boolean"?t:!0,a.filter=o,a.filter.set=function(e,t){a.filter()[e]=t,a.filter.valueHasMutated()},a.filter.reset=function(e,t){e=e||{},e._offset=0;var n=a.filter();_.keys(n).forEach(function(e){e[0]!=="_"&&delete n[e]}),_.extend(n,e),t&&a.filter.valueHasMutated()},a.observable=function(e,t){var r=n.observable(null),i=s.getDataSource();return r.loading=n.observable(!1),r.reload=function(){r.loading(!0);var n=_.filter(_.keys(a.filter()),function(e,t,n){return e[0]!=="_"}),s=_.extend(_.pick(a.filter(),n),e);i.get("/",s,function(e){typeof t=="function"?r(t(e)):r(e),r.loading(!1)})},u.subscribe(function(e){e!==null&&r.reload()}),r},a.reload=function(){u(null)},r.on("changed",function(){a._live&&a.reload()}),a},s.publish=function(e,t){return s.query(t).publishOn(e)},s.prototype.destroy=function(e){var t=this,n=s.getDataSource();return n.destroy(t,e)},s.prototype.save=function(e){var t=this,r=s.getDataSource(),i=r._id(t);return i?r.put(i,n.mapping.toJSON(t),e):r.post(n.mapping.toJSON(t),e)},s},n.bindingHandlers.model={init:function(e,n,r){var i=n();t(e).find("input[name]",function(e,t){console.log(t)})},update:function(e,t,n){}}}(window,jQuery,ko),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(e){var t=Date.CultureInfo.monthNames,n=Date.CultureInfo.abbreviatedMonthNames,r=e.toLowerCase();for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==r||n[i].toLowerCase()==r)return i;return-1},Date.getDayNumberFromName=function(e){var t=Date.CultureInfo.dayNames,n=Date.CultureInfo.abbreviatedDayNames,r=Date.CultureInfo.shortestDayNames,i=e.toLowerCase();for(var s=0;s<t.length;s++)if(t[s].toLowerCase()==i||n[s].toLowerCase()==i)return s;return-1},Date.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},Date.getDaysInMonth=function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},Date.getTimezoneOffset=function(e,t){return t||!1?Date.CultureInfo.abbreviatedTimeZoneDST[e.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[e.toUpperCase()]},Date.getTimezoneAbbreviation=function(e,t){var n=t||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,r;for(r in n)if(n[r]===e)return r;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(e){if(isNaN(this))throw new Error(this);if(e instanceof Date&&!isNaN(e))return this>e?1:this<e?-1:0;throw new TypeError(e)},Date.prototype.equals=function(e){return this.compareTo(e)===0},Date.prototype.between=function(e,t){var n=this.getTime();return n>=e.getTime()&&n<=t.getTime()},Date.prototype.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},Date.prototype.addSeconds=function(e){return this.addMilliseconds(e*1e3)},Date.prototype.addMinutes=function(e){return this.addMilliseconds(e*6e4)},Date.prototype.addHours=function(e){return this.addMilliseconds(e*36e5)},Date.prototype.addDays=function(e){return this.addMilliseconds(e*864e5)},Date.prototype.addWeeks=function(e){return this.addMilliseconds(e*6048e5)},Date.prototype.addMonths=function(e){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(t,this.getDaysInMonth())),this},Date.prototype.addYears=function(e){return this.addMonths(e*12)},Date.prototype.add=function(e){if(typeof e=="number")return this._orient=e,this;var t=e;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this},Date._validate=function(e,t,n,r){if(typeof e!="number")throw new TypeError(e+" is not a Number.");if(e<t||e>n)throw new RangeError(e+" is not a valid value for "+r+".");return!0},Date.validateMillisecond=function(e){return Date._validate(e,0,999,"milliseconds")},Date.validateSecond=function(e){return Date._validate(e,0,59,"seconds")},Date.validateMinute=function(e){return Date._validate(e,0,59,"minutes")},Date.validateHour=function(e){return Date._validate(e,0,23,"hours")},Date.validateDay=function(e,t,n){return Date._validate(e,1,Date.getDaysInMonth(t,n),"days")},Date.validateMonth=function(e){return Date._validate(e,0,11,"months")},Date.validateYear=function(e){return Date._validate(e,1,9999,"seconds")},Date.prototype.set=function(e){var t=e;return!t.millisecond&&t.millisecond!==0&&(t.millisecond=-1),!t.second&&t.second!==0&&(t.second=-1),!t.minute&&t.minute!==0&&(t.minute=-1),!t.hour&&t.hour!==0&&(t.hour=-1),!t.day&&t.day!==0&&(t.day=-1),!t.month&&t.month!==0&&(t.month=-1),!t.year&&t.year!==0&&(t.year=-1),t.millisecond!=-1&&Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),t.second!=-1&&Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),t.minute!=-1&&Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),t.hour!=-1&&Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),t.month!==-1&&Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),t.year!=-1&&Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),t.day!=-1&&Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return e%4===0&&e%100!==0||e%400===0},Date.prototype.isWeekday=function(){return!this.is().sat()&&!this.is().sun()},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(n===0?n+=7*(t||1):n)},Date.prototype.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(n===0?n+=12*(t||1):n)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(e){var t=this.getFullYear(),n=this.getMonth(),r=this.getDate(),i=e||Date.CultureInfo.firstDayOfWeek,s=8-(new Date(t,0,1)).getDay();s==8&&(s=1);var o=(Date.UTC(t,n,r,0,0,0)-Date.UTC(t,0,1,0,0,0))/864e5+1,u=Math.floor((o-s+7)/7);if(u===i){t--;var a=8-(new Date(t,0,1)).getDay();a==2||a==8?u=53:u=52}return u},Date.prototype.isDST=function(){return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=Number(e)*-6/10;return this.addMinutes(n-t),this},Date.prototype.setTimezone=function(e){return this.setTimezoneOffset(Date.getTimezoneOffset(e))},Date.prototype.getUTCOffset=function(){var e=this.getTimezoneOffset()*-10/6,t;return e<0?(t=(e-1e4).toString(),t[0]+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},Date.prototype.getDayName=function(e){return e?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(e){return e?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(e){var t=this,n=function(t){return t.toString().length==1?"0"+t:t};return e?e.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(e){switch(e){case"hh":return n(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return n(t.getHours());case"H":return t.getHours();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return n(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var e={};return e[this._dateElement]=this,Date.now().add(e)},Number.prototype.ago=function(){var e={};return e[this._dateElement]=this*-1,Date.now().add(e)},function(){var e=Date.prototype,t=Number.prototype,n="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),r="january february march april may june july august september october november december".split(/\s/),i="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),s,o=function(e){return function(){return this._is?(this._is=!1,this.getDay()==e):this.moveToDayOfWeek(e,this._orient)}};for(var u=0;u<n.length;u++)e[n[u]]=e[n[u].substring(0,3)]=o(u);var a=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}};for(var f=0;f<r.length;f++)e[r[f]]=e[r[f].substring(0,3)]=a(f);var l=function(e){return function(){return e.substring(e.length-1)!="s"&&(e+="s"),this["add"+e](this._orient)}},c=function(e){return function(){return this._dateElement=e,this}};for(var h=0;h<i.length;h++)s=i[h].toLowerCase(),e[s]=e[s+"s"]=l(i[h]),t[s]=t[s+"s"]=c(s)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(n){var i=n.match(t);if(i)return[i[0],n.substring(i[0].length)];throw new e.Exception(n)}},token:function(e){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){n.push(r[0]),t=r[1];continue}break}return[n,t]}},many:function(e){return function(t){var n=[],r=null;while(t.length){try{r=e.call(this,t)}catch(i){return[n,t]}n.push(r[0]),t=r[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(r){return[null,t]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(r){return[null,n]}throw new e.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=[];for(var i=0;i<e.length;i++)r.push(t.each(e[i],n));return r},cache:function(t){var n={},r=null;return function(i){try{r=n[i]=n[i]||t.call(this,i)}catch(s){r=n[i]=s}if(r instanceof e.Exception)throw r;return r}},any:function(){var t=arguments;return function(n){var r=null;for(var i=0;i<t.length;i++){if(t[i]==null)continue;try{r=t[i].call(this,n)}catch(s){r=null}if(r)return r}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){var r=[],i=null;for(var s=0;s<t.length;s++){if(t[s]==null)continue;try{i=t[s].call(this,n)}catch(o){throw new e.Exception(n)}r.push(i[0]),n=i[1]}return[r,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,n.length==1?n[0]:function(t){var s=null,o=null,u=[];for(var a=0;a<n.length;a++){try{s=n[a].call(this,t)}catch(f){break}u.push(s[0]);try{o=r.call(this,s[1])}catch(l){o=null;break}t=o[1]}if(!s)throw new e.Exception(t);if(o)throw new e.Exception(o[1]);if(i)try{s=i.call(this,s[1])}catch(h){throw new e.Exception(s[1])}return[u,s?s[1]:t]}},between:function(e,n,i){i=i||e;var s=t.each(t.ignore(e),n,t.ignore(i));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(n)),e.slice(-1),t.ignore(r)):t.each(t.many(t.each(e,t.ignore(n))),px,t.ignore(r))},set:function(n,r,i){return r=r||t.rtoken(/^\s*/),i=i||null,function(s){var o=null,u=null,a=null,f=null,l=[[],s],h=!1;for(var p=0;p<n.length;p++){a=null,u=null,o=null,h=n.length==1;try{o=n[p].call(this,s)}catch(v){continue}f=[[o[0]],o[1]];if(o[1].length>0&&!h)try{a=r.call(this,o[1])}catch(m){h=!0}else h=!0;!h&&a[1].length===0&&(h=!0);if(!h){var g=[];for(var y=0;y<n.length;y++)p!=y&&g.push(n[y]);u=t.set(g,r).call(this,a[1]),u[0].length>0&&(f[0]=f[0].concat(u[0]),f[1]=u[1])}f[1].length<l[1].length&&(l=f);if(l[1].length===0)break}if(l[0].length===0)return l;if(i){try{a=i.call(this,l[1])}catch(b){throw new e.Exception(l[1])}l[1]=a[1]}return l}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var r=e.call(this,n);return[t,r[1]]}},process:function(e,t){return function(n){var r=e.call(this,n);return[t.call(this,r[0]),r[1]]}},min:function(t,n){return function(r){var i=n.call(this,r);if(i[0].length<t)throw new e.Exception(r);return i}}},n=function(e){return function(){var t=null,n=[];arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]);if(!t)return e.apply(null,arguments);for(var r=0,i=t.shift();r<i.length;r++)return t.unshift(i[r]),n.push(e.apply(null,t)),t.shift(),n}},i="optional not ignore cache".split(/\s/);for(var s=0;s<i.length;s++)t[i[s]]=n(t[i[s]]);var o=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},u="each any all".split(/\s/);for(var a=0;a<u.length;a++)t[u[a]]=o(t[u[a]])}(),function(){var e=function(t){var n=[];for(var r=0;r<t.length;r++)t[r]instanceof Array?n=n.concat(e(t[r])):t[r]&&n.push(t[r]);return n};Date.Grammar={},Date.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=e.length==3?Date.getMonthNumberFromName(e):Number(e)-1}},year:function(e){return function(){var t=Number(e);this.year=e.length>2?t:t+(t+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(e){e=e instanceof Array?e:[e];var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var n=0;n<e.length;n++)e[n]&&e[n].call(this);this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){t=t instanceof Array?e(t):[t];if(t.length===0)return null;for(var n=0;n<t.length;n++)typeof t[n]=="function"&&t[n].call(this);if(this.now)return new Date;var r=Date.today(),i=null,s=this.days!=null||!!this.orient||!!this.operator;if(s){var o,u,a;a=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",o=Date.getDayNumberFromName(this.weekday)-r.getDay(),u=7,this.days=o?(o+a*u)%u:a*u),this.month&&(this.unit="month",o=this.month-r.getMonth(),u=12,this.months=o?(o+a*u)%u:a*u,this.month=null),this.unit||(this.unit="day");if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*a;return r.add(this)}return this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=r.addDays(Date.getDayNumberFromName(this.weekday)-r.getDay()).getDate()),this.month&&!this.day&&(this.day=1),r.set(this)}};var t=Date.Parsing.Operators,n=Date.Grammar,r=Date.Translator,i;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/),n.timePartDelimiter=t.stoken(":"),n.whiteSpace=t.rtoken(/^\s*/),n.generalDelimiter=t.rtoken(/^(([\s\,]|at|on)+)/);var s={};n.ctoken=function(e){var n=s[e];if(!n){var r=Date.CultureInfo.regexPatterns,i=e.split(/\s+/),o=[];for(var u=0;u<i.length;u++)o.push(t.replace(t.rtoken(r[i[u]]),i[u]));n=s[e]=t.any.apply(null,o)}return n},n.ctoken2=function(e){return t.rtoken(Date.CultureInfo.regexPatterns[e])},n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),r.hour)),n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),r.hour)),n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),r.hour)),n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),r.hour)),n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),r.minute)),n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),r.minute)),n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),r.second)),n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),r.second)),n.hms=t.cache(t.sequence([n.H,n.mm,n.ss],n.timePartDelimiter)),n.t=t.cache(t.process(n.ctoken2("shortMeridian"),r.meridian)),n.tt=t.cache(t.process(n.ctoken2("longMeridian"),r.meridian)),n.z=t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),r.timezone)),n.zz=t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/),r.timezone)),n.zzz=t.cache(t.process(n.ctoken2("timezone"),r.timezone)),n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz])),n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix),n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),r.day)),n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),r.day)),n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),r.month)),n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),r.month)),n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),r.month)),n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),r.year)),n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),r.year)),n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),r.year)),n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),r.year)),i=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))},n.day=i(n.d,n.dd),n.month=i(n.M,n.MMM),n.year=i(n.yyyy,n.yy),n.orientation=t.process(n.ctoken("past future"),function(e){return function(){this.orient=e}}),n.operator=t.process(n.ctoken("add subtract"),function(e){return function(){this.operator=e}}),n.rday=t.process(n.ctoken("yesterday tomorrow today now"),r.rday),n.unit=t.process(n.ctoken("minute hour day week month year"),function(e){return function(){this.unit=e}}),n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]),i=function(){return t.set(arguments,n.datePartDelimiter)},n.mdy=i(n.ddd,n.month,n.day,n.year),n.ymd=i(n.ddd,n.year,n.month,n.day),n.dmy=i(n.ddd,n.day,n.month,n.year),n.date=function(e){return(n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,e)},n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(n[e])return n[e];throw Date.Parsing.Exception(e)}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(e){return t.ignore(t.stoken(e))}))),function(e){return t.process(t.each.apply(null,e),r.finishExact)});var o={},u=function(e){return o[e]=o[e]||n.format(e)[0]};n.formats=function(e){if(e instanceof Array){var n=[];for(var r=0;r<e.length;r++)n.push(u(e[r]));return t.any.apply(null,n)}return u(e)},n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),r.finish),n.start=function(e){try{var t=n._formats.call({},e);if(t[1].length===0)return t}catch(r){}return n._start.call({},e)}}(),Date._parse=Date.parse,Date.parse=function(e){var t=null;if(!e)return null;try{t=Date.Grammar.start.call({},e)}catch(n){return null}return t[1].length===0?t[0]:null},Date.getParseFunction=function(e){var t=Date.Grammar.formats(e);return function(e){var n=null;try{n=t.call({},e)}catch(r){return null}return n[1].length===0?n[0]:null}},Date.parseExact=function(e,t){return Date.getParseFunction(t)(e)};var TimeSpan=function(e,t,n,r,i){var s="days hours minutes seconds milliseconds".split(/\s+/),o=function(e){return function(){return this[e]}},u=function(e){return function(t){return this[e]=t,this}};for(var a=0;a<s.length;a++){var f=s[a],l=f.slice(0,1).toUpperCase()+f.slice(1);TimeSpan.prototype[f]=0,TimeSpan.prototype["get"+l]=o(f),TimeSpan.prototype["set"+l]=u(f)}if(arguments.length==4)this.setDays(e),this.setHours(t),this.setMinutes(n),this.setSeconds(r);else if(arguments.length==5)this.setDays(e),this.setHours(t),this.setMinutes(n),this.setSeconds(r),this.setMilliseconds(i);else if(arguments.length==1&&typeof e=="number"){var c=e<0?-1:1;this.setMilliseconds(Math.abs(e)),this.setDays(Math.floor(this.getMilliseconds()/864e5)*c),this.setMilliseconds(this.getMilliseconds()%864e5),this.setHours(Math.floor(this.getMilliseconds()/36e5)*c),this.setMilliseconds(this.getMilliseconds()%36e5),this.setMinutes(Math.floor(this.getMilliseconds()/6e4)*c),this.setMilliseconds(this.getMilliseconds()%6e4),this.setSeconds(Math.floor(this.getMilliseconds()/1e3)*c),this.setMilliseconds(this.getMilliseconds()%1e3),this.setMilliseconds(this.getMilliseconds()*c)}return this.getTotalMilliseconds=function(){return this.getDays()*864e5+this.getHours()*36e5+this.getMinutes()*6e4+this.getSeconds()*1e3},this.compareTo=function(e){var t=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds()),n;return e===null?n=new Date(1970,1,1,0,0,0):n=new Date(1970,1,1,e.getHours(),e.getMinutes(),e.getSeconds()),t<n?-1:t>n?1:0},this.equals=function(e){return this.compareTo(e)===0},this.add=function(e){return e===null?this:this.addSeconds(e.getTotalMilliseconds()/1e3)},this.subtract=function(e){return e===null?this:this.addSeconds(-e.getTotalMilliseconds()/1e3)},this.addDays=function(e){return new TimeSpan(this.getTotalMilliseconds()+e*864e5)},this.addHours=function(e){return new TimeSpan(this.getTotalMilliseconds()+e*36e5)},this.addMinutes=function(e){return new TimeSpan(this.getTotalMilliseconds()+e*6e4)},this.addSeconds=function(e){return new TimeSpan(this.getTotalMilliseconds()+e*1e3)},this.addMilliseconds=function(e){return new TimeSpan(this.getTotalMilliseconds()+e)},this.get12HourHour=function(){return this.getHours()>12?this.getHours()-12:this.getHours()===0?12:this.getHours()},this.getDesignator=function(){return this.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},this.toString=function(e){this._toString=function(){return this.getDays()!==null&&this.getDays()>0?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())},this.p=function(e){return e.toString().length<2?"0"+
e:e};var t=this;return e?e.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(e){switch(e){case"d":return t.getDays();case"dd":return t.p(t.getDays());case"H":return t.getHours();case"HH":return t.p(t.getHours());case"h":return t.get12HourHour();case"hh":return t.p(t.get12HourHour());case"m":return t.getMinutes();case"mm":return t.p(t.getMinutes());case"s":return t.getSeconds();case"ss":return t.p(t.getSeconds());case"t":return(t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(e,t,n,r,i,s,o){var u="years months days hours minutes seconds milliseconds".split(/\s+/),a=function(e){return function(){return this[e]}},f=function(e){return function(t){return this[e]=t,this}};for(var l=0;l<u.length;l++){var c=u[l],h=c.slice(0,1).toUpperCase()+c.slice(1);TimePeriod.prototype[c]=0,TimePeriod.prototype["get"+h]=a(c),TimePeriod.prototype["set"+h]=f(c)}if(arguments.length==7)this.years=e,this.months=t,this.setDays(n),this.setHours(r),this.setMinutes(i),this.setSeconds(s),this.setMilliseconds(o);else if(arguments.length==2&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var p=e.clone(),d=t.clone(),v=p.clone(),m=p>d?-1:1;this.years=d.getFullYear()-p.getFullYear(),v.addYears(this.years),m==+1?v>d&&this.years!==0&&this.years--:v<d&&this.years!==0&&this.years++,p.addYears(this.years);if(m==+1)while(p<d&&p.clone().addDays(Date.getDaysInMonth(p.getYear(),p.getMonth()))<d)p.addMonths(1),this.months++;else while(p>d&&p.clone().addDays(-p.getDaysInMonth())>d)p.addMonths(-1),this.months--;var g=d-p;if(g!==0){var y=new TimeSpan(g);this.setDays(y.getDays()),this.setHours(y.getHours()),this.setMinutes(y.getMinutes()),this.setSeconds(y.getSeconds()),this.setMilliseconds(y.getMilliseconds())}}return this};(function(e){e.fn.daterangepicker=function(t){function c(t){if(!t.getDate())return"";var n=t.getDate(),i=t.getMonth(),s=t.getFullYear();i++;var o=r.dateFormat;return e.datepicker.formatDate(o,t)}function h(){f.data("state")=="closed"&&(v(),f.fadeIn(300).data("state","open"),r.onOpen())}function p(){f.data("state")=="open"&&(f.fadeOut(300).data("state","closed"),r.onClose())}function d(){f.data("state")=="open"?p():h()}function v(){var t=E||n,r=t.offset(),i="left",s=r.left,o=e(window).width()-s-t.outerWidth();s>o&&(i="right",s=o),f.parent().css(i,s).css("top",r.top+t.outerHeight())}function m(e,t,n,i){if(e.is(".ui-daterangepicker-specificDate"))i.hide(),n.show(),t.find(".title-start").text(r.presets.specificDate),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").restoreDateFromData().css("opacity",0).hide(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-allDatesBefore"))i.hide(),n.show(),t.find(".title-end").text(r.presets.allDatesBefore),t.find(".range-start").saveDateToData().datepicker("setDate",r.earliestDate).css("opacity",0).hide(400),t.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-allDatesAfter"))i.hide(),n.show(),t.find(".title-start").text(r.presets.allDatesAfter),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").saveDateToData().datepicker("setDate",r.latestDate).css("opacity",0).hide(400),setTimeout(function(){i.fadeIn()},400);else if(e.is(".ui-daterangepicker-dateRange"))i.hide(),n.show(),t.find(".title-start").text(r.rangeStartTitle),t.find(".title-end").text(r.rangeEndTitle),t.find(".range-start").restoreDateFromData().css("opacity",1).show(400),t.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){i.fadeIn()},400);else{i.hide(),t.find(".range-start, .range-end").css("opacity",0).hide(400,function(){n.hide()});var s=typeof e.data("dateStart")=="string"?Date.parse(e.data("dateStart")):e.data("dateStart")(),o=typeof e.data("dateEnd")=="string"?Date.parse(e.data("dateEnd")):e.data("dateEnd")();t.find(".range-start").datepicker("setDate",s).find(".ui-datepicker-current-day").trigger("click"),t.find(".range-end").datepicker("setDate",o).find(".ui-datepicker-current-day").trigger("click")}return!1}var n=e(this),r=e.extend({presetRanges:[{text:"Today",dateStart:"today",dateEnd:"today"},{text:"Last 7 days",dateStart:"today-7days",dateEnd:"today"},{text:"Month to date",dateStart:function(){return Date.parse("today").moveToFirstDayOfMonth()},dateEnd:"today"},{text:"Year to date",dateStart:function(){var e=Date.parse("today");return e.setMonth(0),e.setDate(1),e},dateEnd:"today"},{text:"The previous Month",dateStart:function(){return Date.parse("1 month ago").moveToFirstDayOfMonth()},dateEnd:function(){return Date.parse("1 month ago").moveToLastDayOfMonth()}}],presets:{specificDate:"Specific Date",allDatesBefore:"All Dates Before",allDatesAfter:"All Dates After",dateRange:"Date Range"},rangeStartTitle:"Start date",rangeEndTitle:"End date",nextLinkText:$.datepicker._defaults.nextText,prevLinkText:$.datepicker._defaults.prevText,doneButtonText:"Done",earliestDate:Date.parse("-15years"),latestDate:Date.parse("today"),constrainDates:!1,rangeSplitter:"-",dateFormat:$.datepicker._defaults.dateFormat,closeOnSelect:!0,arrows:!1,appendTo:"body",onClose:function(){},onOpen:function(){},onChange:function(){},datepickerOptions:null},t),i={onSelect:function(e,t){f.find(".ui-daterangepicker-specificDate").is(".ui-state-active")&&f.find(".range-end").datepicker("setDate",f.find(".range-start").datepicker("getDate")),$(this).trigger("constrainOtherPicker");var i=c(f.find(".range-start").datepicker("getDate")),s=c(f.find(".range-end").datepicker("getDate"));n.length==2?(n.eq(0).val(i),n.eq(1).val(s)):n.val(i!=s?i+" "+r.rangeSplitter+" "+s:i),r.closeOnSelect&&!f.find("li.ui-state-active").is(".ui-daterangepicker-dateRange")&&!f.is(":animated")&&p(),r.onChange()},defaultDate:0};n.bind("change",r.onChange),r.datepickerOptions=t?e.extend(i,t.datepickerOptions):i;var s,o=Date.parse("today"),u,a;n.size()==2?(u=Date.parse(n.eq(0).val()),a=Date.parse(n.eq(1).val()),u==null&&(u=a),a==null&&(a=u)):(u=Date.parse(n.val().split(r.rangeSplitter)[0]),a=Date.parse(n.val().split(r.rangeSplitter)[1]),a==null&&(a=u)),u!=null&&(s=u),a!=null&&(o=a);var f=e('<div class="ui-daterangepicker ui-widget ui-helper-clearfix ui-widget-content ui-corner-all"></div>'),l=function(){var t=e('<ul class="ui-widget-content"></ul>').appendTo(f);e.each(r.presetRanges,function(){e('<li class="ui-daterangepicker-'+this.text.replace(/ /g,"")+' ui-corner-all"><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).appendTo(t)});var n=0;return e.each(r.presets,function(r,i){e('<li class="ui-daterangepicker-'+r+" preset_"+n+' ui-helper-clearfix ui-corner-all"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#">'+i+"</a></li>").appendTo(t),n++}),t.find("li").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).click(function(){return f.find(".ui-state-active").removeClass("ui-state-active"),e(this).addClass("ui-state-active"),m(e(this),f,g,y),!1}),t}();e.fn.restoreDateFromData=function(){return e(this).data("saveDate")&&e(this).datepicker("setDate",e(this).data("saveDate")).removeData("saveDate"),this},e.fn.saveDateToData=function(){return e(this).data("saveDate")||e(this).data("saveDate",e(this).datepicker("getDate")),this};var g=e('<div class="ranges ui-widget-header ui-corner-all ui-helper-clearfix"><div class="range-start"><span class="title-start">Start Date</span></div><div class="range-end"><span class="title-end">End Date</span></div></div>').appendTo(f);g.find(".range-start, .range-end").datepicker(r.datepickerOptions),g.find(".range-start").datepicker("setDate",s),g.find(".range-end").datepicker("setDate",o),g.find(".range-start, .range-end").bind("constrainOtherPicker",function(){r.constrainDates&&($(this).is(".range-start")?f.find(".range-end").datepicker("option","minDate",$(this).datepicker("getDate")):f.find(".range-start").datepicker("option","maxDate",$(this).datepicker("getDate")))}).trigger("constrainOtherPicker");var y=e('<button class="btnDone ui-state-default ui-corner-all">'+r.doneButtonText+"</button>").click(function(){f.find(".ui-datepicker-current-day").trigger("click"),p()}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).appendTo(g);e(this).click(function(){return d(),!1}),g.hide().find(".range-start, .range-end, .btnDone").hide(),f.data("state","closed"),g.find(".ui-datepicker").css("display","block"),e(r.appendTo).append(f),f.wrap('<div class="ui-daterangepickercontain"></div>');if(r.arrows&&n.size()==1){var b=e('<a href="#" class="ui-daterangepicker-prev ui-corner-all" title="'+r.prevLinkText+'"><span class="ui-icon ui-icon-circle-triangle-w">'+r.prevLinkText+"</span></a>"),w=e('<a href="#" class="ui-daterangepicker-next ui-corner-all" title="'+r.nextLinkText+'"><span class="ui-icon ui-icon-circle-triangle-e">'+r.nextLinkText+"</span></a>");e(this).addClass("ui-rangepicker-input ui-widget-content").wrap('<div class="ui-daterangepicker-arrows ui-widget ui-widget-header ui-helper-clearfix ui-corner-all"></div>').before(b).before(w).parent().find("a").click(function(){var t=g.find(".range-start").datepicker("getDate"),n=g.find(".range-end").datepicker("getDate"),r=Math.abs((new TimeSpan(t-n)).getTotalMilliseconds())+864e5;return e(this).is(".ui-daterangepicker-prev")&&(r=-r),g.find(".range-start, .range-end ").each(function(){var t=e(this).datepicker("getDate");if(t==null)return!1;e(this).datepicker("setDate",t.add({milliseconds:r})).find(".ui-datepicker-current-day").trigger("click")}),!1}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")});var E=n.parent()}return e(document).click(function(){f.is(":visible")&&p()}),f.click(function(){return!1}).hide(),this}})(jQuery),function(e,t){function n(e){var t=/([0-9]{4}-[0-9]{2}-[0-9]{2}) ?([0-9]{2}:[0-9]{2}:[0-9]{2})?/.exec(e);return undefined!==t[1]?undefined!==t[2]?new Date(t[1]+"T"+t[2]):new Date(t[1]+"T00:00:00"):!1}t.bindingHandlers.datepicker={init:function(r,i,s){var o=e(r),u=s().rangePicker||!1,a=i(),f=t.utils.unwrapObservable(a),l;typeof f=="string"?l=n(f):f instanceof Date?l=f:(l=new Date,l.setHours(l.getHours()-l.getTimezoneOffset()/60),a(l));var c=s().datepickerOptions||{};c.defaultDate=l,u?(c.onChange=function(){var e=o.val();typeof a=="function"&&a(o.val())},o.daterangepicker(c)):(o.datepicker(c),t.utils.registerEventHandler(r,"change",function(){typeof a=="function"&&(a()instanceof Date?a(e(r).datepicker("getDate")):a(e.datepicker.formatDate("yy-mm-dd",e(r).datepicker("getDate"))))}),t.utils.domNodeDisposal.addDisposeCallback(r,function(){o.datepicker("destroy")}))},update:function(r,i){var s=t.utils.unwrapObservable(i());if(undefined==s||typeof s=="boolean")return;var o;if(typeof s=="string")o=n(s);else{if(!(s instanceof Date))return;o=s}e(r).datepicker("setDate",o)}}}(jQuery,ko),undefined!==window.elRTE&&function(e,t,n){"use strict";var r=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}};t.bindingHandlers.elrte={init:function(n,i,s){var o=e(n),u=t.utils.unwrapObservable(i()),a=s().value;a&&a.subscribe&&(o.val(t.utils.unwrapObservable(a)),a.subscribe(function(e){n._updating||o.elrte("val",o.val())})),o.elrte(u);var f=r(function(){n._updating=!0,o.elrte("updateSource").change(),n._updating=!1},200,!0),l=n.elrte.iframe.contentWindow.window.focus;n.elrte.iframe.contentWindow.window.focus=function(){f(),l.apply(this,arguments)},n.elrte.$doc.on("keyup",f),t.utils.domNodeDisposal.addDisposeCallback(n,function(){o.elrte("destroy")})},update:function(e,t,n,r){}},t.bindingHandlers.elfinder={init:function(n,r){var i=e(n),s=t.utils.unwrapObservable(r());i.elfinder(s),t.utils.domNodeDisposal.addDisposeCallback(n,function(){i.elfinder("destroy")})},update:function(e,t,n,r){}}}(jQuery,ko,elRTE),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async&&(n.type==="POST"||n.type==="GET")){var r,i;return{send:function(s,o){r=e('<form style="display:none;"></form>'),i=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,s=e.isArray(n.paramName)?n.paramName:[n.paramName];i.unbind("load").bind("load",function(){var t;try{t=i.contents();if(!t.length||!t[0].firstChild)throw new Error}catch(n){t=undefined}o(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(r),r.remove()}),r.prop("target",i.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(r)}),n.fileInput&&n.fileInput.length&&n.type==="POST"&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",s[t]||n.paramName)}),r.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),r.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")),i.replaceWith(r)})}),r.append(i).appendTo(document.body)},abort:function(){i&&i.unbind("load").prop("src","javascript".concat(":false;")),r&&r.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return e(t[0].body).text()},"iframe json":function(t){return e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return e(t[0].body).html()},"iframe script":function(t){return e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!!window.XMLHttpRequestUpload&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{options:{namespace:undefined,dropZone:e(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput","multipart","forceIframeTransport"],_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return typeof t.formData=="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_onProgress:function(e,t){if(e.lengthComputable){var n=t.total||this._getTotal(t.files),r=parseInt(e.loaded/e.total*(t.chunkSize||n),10)+(t.uploadedBytes||0);this._loaded+=r-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=r,t.total=n,this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_initXHRData:function(t){var n,r=t.files[0],i=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];if(!i||t.blob)t.headers=e.extend(t.headers,{"X-File-Name":r.name,"X-File-Type":r.type,"X-File-Size":r.size}),t.blob?i||(t.contentType="application/octet-stream",t.data=t.blob):(t.contentType=r.type,t.data=r);i&&e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:s,value:t.blob}):e.each(t.files,function(e,r){n.push({name:t.paramName[e]||s,value:r})})):(t.formData instanceof FormData?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(s,t.blob,r.name):e.each(t.files,function(e,r){r instanceof Blob&&n.append(t.paramName[e]||s,r,r.name)})),t.data=n),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form"));t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&(t.type="POST")},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_chunkedUpload:function(t,n){var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes=t.uploadedBytes||0,u=t.maxChunkSize||s,a=i.webkitSlice||i.mozSlice||i.slice,f,l,c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error="uploadedBytes",this._getXHRPromise(!1,t.context,[null,"error",i.error])):(l=Math.ceil((s-o)/u),f=function(n){return n?f(n-=1).pipe(function(){var s=e.extend({},t);return s.blob=a.call(i,o+n*u,o+(n+1)*u),s.chunkSize=s.blob.size,r._initXHRData(s),r._initProgressListener(s),c=(e.ajax(s)||r._getXHRPromise(!1,s.context)).done(function(){s.loaded||r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s.chunkSize,total:s.chunkSize}),s),t.uploadedBytes=s.uploadedBytes+=s.chunkSize}),c}):r._getXHRPromise(!0,t.context)},h=f(l),h.abort=function(){return c.abort()},this._enhancePromise(h))},_beforeSend:function(e,t){this._active===0&&this._trigger("start"),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,n,r,i){this._isXHRUpload(i)||this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:1,total:1}),i),i.result=t,i.textStatus=n,i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){r.jqXHR=e,r.textStatus=t,r.errorThrown=n,this._trigger("fail",null,r),r.recalculateProgress&&(this._loaded-=r.loaded||r.uploadedBytes||0,this._total-=r.total||this._getTotal(r.files))},_onAlways:function(e,t,n,r){this._active-=1,r.textStatus=t,n&&n.always?(r.jqXHR=n,r.result=e):(r.jqXHR=e,r.errorThrown=n),this._trigger("always",null,r),this._active===0&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(t,n){var r=this,i,s,o,u=r._getAJAXSettings(n),a=function(n,s){return r._sending+=1,i=i||(n!==!1&&r._trigger("send",t,u)!==!1&&(r._chunkedUpload(u)||e.ajax(u))||r._getXHRPromise(!1,u.context,s)).done(function(e,t,n){r._onDone(e,t,n,u)}).fail(function(e,t,n){r._onFail(e,t,n,u)}).always(function(e,t,n){r._sending-=1,r._onAlways(e,t,n,u);if(u.limitConcurrentUploads&&u.limitConcurrentUploads>r._sending){var i=r._slots.shift();while(i){if(!i.isRejected()){i.resolve();break}i=r._slots.shift()}}}),i};return this._beforeSend(t,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),o=s.pipe(a)):o=this._sequence=this._sequence.pipe(a,a),o.abort=function(){var e=[undefined,"abort","abort"];return i?i.abort():(s&&s.rejectWith(e),a(!1,e))},this._enhancePromise(o)):a()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=s.limitMultiFileUploads,u=this._getParamName(s),a,f,l,c;if(!s.singleFileUploads&&!o||!this._isXHRUpload(s))l=[n.files],a=[u];else if(!s.singleFileUploads&&o){l=[],a=[];for(c=0;c<n.files.length;c+=o)l.push(n.files.slice(c,c+o)),f=u.slice(c,c+o),f.length||(f=u),a.push(f)}else a=u;return n.originalFiles=n.files,e.each(l||n.files,function(s,o){var u=e.extend({},n);return u.files=l?o:[o],u.paramName=a[s],u.submit=function(){return u.jqXHR=this.jqXHR=r._trigger("submit",t,this)!==!1&&r._onSend(t,this),this.jqXHR},i=r._trigger("add",t,u)}),i},_normalizeFile:function(e,t){t.name===undefined&&t.size===undefined&&(t.name=t.fileName,t.size=t.fileSize)},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?n[0]:r}),t[0]===this.element[0]&&(this.element=n)},_onChange:function(t){var n=t.data.fileupload,r={files:e.each(e.makeArray(t.target.files),n._normalizeFile),fileInput:e(t.target),form:e(t.target.form)};r.files.length||(r.files=[{name:t.target.value.replace(/^.*\\/,"")}]),n.options.replaceFileInput&&n._replaceFileInput(r.fileInput);if(n._trigger("change",t,r)===!1||n._onAdd(t,r)===!1)return!1},_onPaste:function(t){var n=t.data.fileupload,r=t.originalEvent.clipboardData,i=r&&r.items||[],s={files:[]};e.each(i,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&s.files.push(n)});if(n._trigger("paste",t,s)===!1||n._onAdd(t,s)===!1)return!1},_onDrop:function(t){var n=t.data.fileupload,r=t.dataTransfer=t.originalEvent.dataTransfer,i={files:e.each(e.makeArray(r&&r.files),n._normalizeFile)};if(n._trigger("drop",t,i)===!1||n._onAdd(t,i)===!1)return!1;t.preventDefault()},_onDragOver:function(e){var t=e.data.fileupload,n=e.dataTransfer=e.originalEvent.dataTransfer;if(t._trigger("dragover",e)===!1)return!1;n&&(n.dropEffect=n.effectAllowed="copy"),e.preventDefault()},_initEventHandlers:function(){var e=this.options.namespace;this._isXHRUpload(this.options)&&this.options.dropZone.bind("dragover."+e,{fileupload:this},this._onDragOver).bind("drop."+e,{fileupload:this},this._onDrop).bind("paste."+e,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+e,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var e=this.options.namespace;this.options.dropZone.unbind("dragover."+e,this._onDragOver).unbind("drop."+e,this._onDrop).unbind("paste."+e,this._onPaste),this.options.fileInput.unbind("change."+e,this._onChange)},_setOption:function(t,n){var r=e.inArray(t,this._refreshOptionsList)!==-1;r&&this._destroyEventHandlers(),e.Widget.prototype._setOption.call(this,t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone))},_create:function(){var t=this.options,n=e.extend({},this.element.data());n[this.widgetName]=undefined,e.extend(t,n),t.namespace=t.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),e.Widget.prototype.destroy.call(this)},enable:function(){e.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),e.Widget.prototype.disable.call(this)},add:function(t){if(!t||this.options.disabled)return;t.files=e.each(e.makeArray(t.files),this._normalizeFile),this._onAdd(null,t)},send:function(t){if(t&&!this.options.disabled){t.files=e.each(e.makeArray(t.files),this._normalizeFile);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e,t){"use strict";t.bindingHandlers.fileupload={init:function(n,r){var i=t.utils.unwrapObservable(r());e(n).fileupload(i),t.utils.domNodeDisposal.addDisposeCallback(n,function(){e(n).fileupload("destroy")})},update:function(n,r,i,s){var o=t.utils.unwrapObservable(r());e(n).fileupload("option",o)}}}(jQuery,ko),function(e){var t=(e.browser.msie?"paste":"input")+".mask",n=window.orientation!=undefined;e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},e.fn.extend({caret:function(e,t){if(this.length==0)return;if(typeof e=="number")return t=typeof t=="number"?t:e,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}});if(this[0].setSelectionRange)e=this[0].selectionStart,t=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length}return{begin:e,end:t}},unmask:function(){return this.trigger("unmask")},mask:function(r,i){if(!r&&this.length>0){var s=e(this[0]);return s.data(e.mask.dataName)()}i=e.extend({placeholder:"_",completed:null},i);var o=e.mask.definitions,u=[],a=r.length,f=null,l=r.length;return e.each(r.split(""),function(e,t){t=="?"?(l--,a=e):o[t]?(u.push(new RegExp(o[t])),f==null&&(f=u.length-1)):u.push(null)}),this.trigger("unmask").each(function(){function p(e){while(++e<=l&&!u[e]);return e}function d(e){while(--e>=0&&!u[e]);return e}function v(e,t){if(e<0)return;for(var n=e,r=p(t);n<l;n++)if(u[n]){if(!(r<l&&u[n].test(c[r])))break;c[n]=c[r],c[r]=i.placeholder,r=p(r)}w(),s.caret(Math.max(f,e))}function m(e){for(var t=e,n=i.placeholder;t<l;t++)if(u[t]){var r=p(t),s=c[t];c[t]=n;if(!(r<l&&u[r].test(s)))break;n=s}}function g(e){var t=e.which;if(t==8||t==46||n&&t==127){var r=s.caret(),i=r.begin,o=r.end;return o-i==0&&(i=t!=46?d(i):o=p(i-1),o=t==46?p(o):o),b(i,o),v(i,o-1),!1}if(t==27)return s.val(h),s.caret(0,E()),!1}function y(e){var t=e.which,n=s.caret();if(e.ctrlKey||e.altKey||e.metaKey||t<32)return!0;if(t){n.end-n.begin!=0&&(b(n.begin,n.end),v(n.begin,n.end-1));var r=p(n.begin-1);if(r<l){var o=String.fromCharCode(t);if(u[r].test(o)){m(r),c[r]=o,w();var a=p(r);s.caret(a),i.completed&&a>=l&&i.completed.call(s)}}return!1}}function b(e,t){for(var n=e;n<t&&n<l;n++)u[n]&&(c[n]=i.placeholder)}function w(){return s.val(c.join("")).val()}function E(e){var t=s.val(),n=-1;for(var r=0,o=0;r<l;r++)if(u[r]){c[r]=i.placeholder;while(o++<t.length){var h=t.charAt(o-1);if(u[r].test(h)){c[r]=h,n=r;break}}if(o>t.length)break}else c[r]==t.charAt(o)&&r!=a&&(o++,n=r);if(!e&&n+1<a)s.val(""),b(0,l);else if(e||n+1>=a)w(),e||s.val(s.val().substring(0,n+1));return a?r:f}var s=e(this),c=e.map(r.split(""),function(e,t){if(e!="?")return o[e]?i.placeholder:e}),h=s.val();s.data(e.mask.dataName,function(){return e.map(c,function(e,t){return u[t]&&e!=i.placeholder?e:null}).join("")}),s.attr("readonly")||s.one("unmask",function(){s.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){h=s.val();var t=E();w();var n=function(){t==r.length?s.caret(0,t):s.caret(t)};(e.browser.msie?n:function(){setTimeout(n,0)})()}).bind("blur.mask",function(){E(),s.val()!=h&&s.change()}).bind("keydown.mask",g).bind("keypress.mask",y).bind(t,function(){setTimeout(function(){s.caret(E(!0))},0)}),E()})}})}(jQuery),function(e){e.fn.maskMoney=function(t){return t=e.extend({symbol:"US$",showSymbol:!1,symbolStay:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!1,allowNegative:!1},t),this.each(function(){function i(){r=!0}function s(){r=!1}function o(t){t=t||window.event;var o=t.charCode||t.keyCode||t.which;if(o==undefined)return!1;if(n.attr("readonly")&&o!=13&&o!=9)return!1;if(o<48||o>57)return o==45?(i(),n.val(g(n)),!1):o==43?(i(),n.val(n.val().replace("-","")),!1):o==13||o==9?(r&&(s(),e(this).change()),!0):o==37||o==39?!0:(l(t),!0);if(n.val().length>=n.attr("maxlength"))return!1;l(t);var u=String.fromCharCode(o),a=n.get(0),f=n.getInputSelection(a),h=f.start,p=f.end;return a.value=a.value.substring(0,h)+u+a.value.substring(p,a.value.length),c(a,h+1),i(),!1}function u(t){t=t||window.event;var o=t.charCode||t.keyCode||t.which;if(o==undefined)return!1;if(n.attr("readonly")&&o!=13&&o!=9)return!1;var u=n.get(0),a=n.getInputSelection(u),f=a.start,h=a.end;return o==8?(l(t),f==h?(u.value=u.value.substring(0,f-1)+u.value.substring(h,u.value.length),f-=1):u.value=u.value.substring(0,f)+u.value.substring(h,u.value.length),c(u,f),i(),!1):o==9?(r&&(e(this).change(),s()),!0):o==46||o==63272?(l(t),u.selectionStart==u.selectionEnd?u.value=u.value.substring(0,f)+u.value.substring(h+1,u.value.length):u.value=u.value.substring(0,f)+u.value.substring(h,u.value.length),c(u,f),i(),!1):!0}function a(e){var r=v();n.val()==r?n.val(""):n.val()==""&&t.defaultZero?n.val(m(r)):n.val(m(n.val()));if(this.createTextRange){var i=this.createTextRange();i.collapse(!1),i.select()}}function f(r){e.browser.msie&&o(r),n.val()==""||n.val()==m(v())||n.val()==t.symbol?t.allowZero?t.symbolStay?n.val(m(v())):n.val(v()):n.val(""):t.symbolStay?t.symbolStay&&n.val()==t.symbol&&n.val(m(v())):n.val(n.val().replace(t.symbol,""))}function l(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function c(e,t){var r=n.val().length;n.val(h(e.value));var i=n.val().length;t-=r-i,n.setCursorPosition(t)}function h(e){e=e.replace(t.symbol,"");var r="0123456789",i=e.length,s="",o="",u="";i!=0&&e.charAt(0)=="-"&&(e=e.replace("-",""),t.allowNegative&&(u="-"));if(i==0){if(!t.defaultZero)return o;o="0.00"}for(var a=0;a<i;a++)if(e.charAt(a)!="0"&&e.charAt(a)!=t.decimal)break;for(;a<i;a++)r.indexOf(e.charAt(a))!=-1&&(s+=e.charAt(a));var f=parseFloat(s);return f=isNaN(f)?0:f/Math.pow(10,t.precision),n.trigger("money.change",[f]),p(f)}function p(e){typeof e!="number"&&(e=0);var n=e.toFixed(t.precision),r=e<0?"-":"",i=t.precision==0?0:1,s,o=(n=n.split("."))[i].substr(0,t.precision);for(s=(n=n[0]).length;(s-=3)>=1;)n=n.substr(0,s)+t.thousands+n.substr(s);return t.precision>0?m(r+n+t.decimal+o+Array(t.precision+1-o.length).join(0)):m(r+n)}function d(){var e=n.val();n.val(h(e))}function v(){var e=parseFloat("0")/Math.pow(10,t.precision);return e.toFixed(t.precision).replace(new RegExp("\\.","g"),t.decimal)}function m(e){return t.showSymbol&&e.substr(0,t.symbol.length)!=t.symbol?t.symbol+e:e}function g(e){if(t.allowNegative){var n=e.val();return e.val()!=""&&e.val().charAt(0)=="-"?e.val().replace("-",""):"-"+e.val()}return e.val()}var n=e(this),r=!1;n.bind("keypress.maskMoney",o),n.bind("keydown.maskMoney",u),n.bind("blur.maskMoney",f),n.bind("focus.maskMoney",a),n.bind("mask",d),n.bind("money.update",function(e,t){n.val(p(t))}),n.one("unmaskMoney",function(){n.unbind(".maskMoney"),e.browser.msie?this.onpaste=null:e.browser.mozilla&&this.removeEventListener("input",f,!1)})})},e.fn.unmaskMoney=function(){return this.trigger("unmaskMoney")},e.fn.maskValue=function(){return this.trigger("mask")},e.fn.setCursorPosition=function(e){return this.each(function(t,n){if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,e);else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()}}),this},e.fn.getInputSelection=function(e){var t=0,n=0,r,i,s,o,u;return typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"?(t=e.selectionStart,n=e.selectionEnd):(i=document.selection.createRange(),i&&i.parentElement()==e&&(o=e.value.length,r=e.value.replace(/\r\n/g,"\n"),s=e.createTextRange(),s.moveToBookmark(i.getBookmark()),u=e.createTextRange(),u.collapse(!1),s.compareEndPoints("StartToEnd",u)>-1?t=n=o:(t=-s.moveStart("character",-o),t+=r.slice(0,t).split("\n").length-1,s.compareEndPoints("EndToEnd",u)>-1?n=o:(n=-s.moveEnd("character",-o),n+=r.slice(0,n).split("\n").length-1)))),{start:t,end:n}}}(jQuery),function(e,t){t.bindingHandlers.mask={init:function(t,n){var r=e(t),i=n();r.mask(i)}},t.bindingHandlers.money={init:function(n
,r,i){var s=e(n);t.utils.domNodeDisposal.addDisposeCallback(n,function(){s.datepicker("destroy")});var o=i().maskSettings||{};s.maskMoney(o),t.utils.registerEventHandler(n,"money.change",function(e,t){var n=r();n(t)})},update:function(n,r){var i=t.utils.unwrapObservable(r());typeof i!="number"&&(i=parseFloat(i)||0),e(n).trigger("money.update",[i])}}}(jQuery,ko),undefined!==window.tinymce&&function(e,t,n){"use strict";t.bindingHandlers.tinymce={init:function(r,i,s,o){var u=s().tinymceOptions||{},a=i();e(r).val(t.utils.unwrapObservable(a)),t.isWriteableObservable(a)&&(u.setup=function(e){e.onChange.add(function(e,t){a(e.getContent())})}),r.id||(r.id="mp_tinymce_"+(new Date).getTime()),u=e.extend({theme:"simple"},u),u.mode="exact",u.elements=r.id,n.init(u),t.utils.domNodeDisposal.addDisposeCallback(r,function(){n.execCommand("mceFocus",!1,r.id),n.execCommand("mceRemoveControl",!1,r.id)})},update:function(e,r,i,s){var o=t.utils.unwrapObservable(r()),u=n.get(e.id)}}}(jQuery,ko,tinymce),function(e,t,n,r){"use strict";n.ui=n.ui||{},n.ui.Grid=function(e,n){var r=this;n=t.extend({},{columns:[],actions:[]},n),r.data=e,r.columns=n.columns,r.actions=n.actions},t.fn.alert=function(e,n){var r={level:e,block:!1,delay:250};t('<div class="alert-message '+r.level+(r.block?" block-message":"")+'" style="display: none;"><a class="close" href="#">×</a>'+n+"</div>").prependTo(this).fadeIn(r.delay)},t(document).on("click",".alert-message .close",function(e){e.preventDefault();var n=t(this).parent(".alert-message");n.fadeOut(250,function(){n.remove()})}),t.fn.info=function(e,t){this.alert("info",e)},t.fn.success=function(e){this.alert("success",e)},t.fn.warning=function(e){this.alert("warning",e)},t.fn.error=function(e){this.alert("error",e)},r.bindingHandlers.autocomplete={init:function(e,t,n,i){var s=jQuery(e),o=t();r.utils.domNodeDisposal.addDisposeCallback(e,function(){s.autocomplete("destroy")});if(typeof o=="string"||typeof o=="function"||o instanceof Array)o={source:o};var u=s.autocomplete(o).data("autocomplete");undefined!==o.renderItem&&(u._renderItem=o.renderItem),undefined!==o.renderMenu&&(u._renderMenu=o.renderMenu)}},r.bindingHandlers.dialog={init:function(e,t,n,i){var s=jQuery(e),o=t();r.utils.domNodeDisposal.addDisposeCallback(e,function(){s.dialog("destroy")}),jQuery.extend(o,{autoOpen:!1}),s.dialog(o)}},r.bindingHandlers.icon={init:function(e,t){var n='<span class="ui-icon ui-icon-'+t()+'"></span>';jQuery(e).prepend(n)}}}(window,jQuery,metaproject,ko),function(e){"use strict";metaproject.ui=metaproject.ui||{},metaproject.ui.Grid=function(t,n){var r=this;n=e.extend({},{columns:[],actions:[]},n),r.data=t,r.columns=n.columns,r.actions=n.actions},metaproject.ui.Grid.html='<table class="table table-striped table-condensed">         <thead>         <tr>             <!-- ko foreach: columns -->             <th data-bind="html: label"></th>             <!-- /ko -->             <!-- ko if: actions.length > 0 -->             <th></th>             <!-- /ko -->         </tr>         </thead>         <tbody data-bind="foreach: data">             <tr data-bind="">         <!-- ko foreach: $parent.columns -->                 <td data-bind="html: typeof value == \'function\' ? value($parent) : $parent[value]"></td>         <!-- /ko -->                 <td data-bind="foreach: $parent.actions">                     <button class="btn" data-bind="click: function() { fn($parent); }, html: label, css: $data.css || {}"></button>                 </td>             </tr>         </tbody>     </table>',ko.bindingHandlers.grid={init:function(e,t,n,r,i){e.innerHTML=metaproject.ui.Grid.html;var s=i.createChildContext(t(),null,function(e){ko.utils.extend(e,t())});return ko.applyBindingsToDescendants(s,e),{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){}}}(jQuery);